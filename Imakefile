XPIXMAPDIR    = /usr/X11/include/X11/pixmaps
XBINDIR       = /usr/local/bin
XFCE_DIR      = /var/XFCE
XFCE_PAL      = /var/XFCE/palettes
FVWM_MODULES  = /usr/lib/X11/fvwm
FVWM2_MODULES = /usr/lib/X11/fvwm2

SRCS = XFCE.c XFCE_cb.c addicon.c addicon_cb.c color.c command.c command_cb.c\
 configfile.c defcolor.c defcolor_cb.c fileutil.c info.c info_cb.c main.c\
 pulldown.c screen.c screen_cb.c select.c sendinfo.c startup.c

OBJS = XFCE.o XFCE_cb.o addicon.o addicon_cb.o color.o command.o command_cb.o\
 configfile.o defcolor.o defcolor_cb.o fileutil.o info.o info_cb.o main.o\
 pulldown.o screen.o screen_cb.o select.o sendinfo.o startup.o

XCOMM for LINUX: 
EXTRA_LIBRARIES = -L/usr/local/lib -lforms -lXpm -lm XCOMM 

XCOMM FOR Solaris
XCOMM EXTRA_LIBRARIES = -L/usr/local/lib -lforms -lXpm -lm -lnsl

EXTRA_INCLUDES = -I/usr/local/include -I.
EXTRA_DEFINES  = -DXPIXMAPDIR=\"$(XPIXMAPDIR)\" -DXFCE_DIR=\"$(XFCE_DIR)\"\
 -DXBINDIR=\"$(XBINDIR)\" -DXFCE_PAL=\"$(XFCE_PAL)\"
LDLIBS = $(EXTRA_LIBRARIES) $(EXTENSIONLIB) $(XLIB)

ComplexProgramTarget(XFCE)

install_palettes::                                         @@\
	mkdir -p $(XFCE_PAL)				   @@\
	chmod a+rw $(XFCE_PAL)				   @@\
	cp -b palettes\/* $(XFCE_PAL)			   @@\

install_bin::   	XFCE install.man		   @@\
	@if [ -d $(XBINDIR) ]; then set +x; \              @@\
	else (set -x; $(MKDIRHIER) $(XBINDIR)); fi         @@\
	cp XFCE $(XBINDIR);                                @@\
	chmod 0755 $(XBINDIR)/XFCE;                        @@\
	@if [ -d $(FVWM_MODULES) ]; then \		   @@\
	ln -sf $(XBINDIR)/XFCE $(FVWM_MODULES)/; fi	   @@\
	@if [ -d $(FVWM2_MODULES) ]; then \		   @@\
	ln -sf $(XBINDIR)/XFCE $(FVWM2_MODULES)/; fi	   @@\

install_full::		install_bin install_palettes       @@\
	mkdir -p $(XFCE_DIR)				   @@\
	cp XFCE_full.logo $(XFCE_DIR)/XFCE.logo;           @@\

install_dithered::	install_bin install_palettes	   @@\
	mkdir -p $(XFCE_DIR)				   @@\
	cp XFCE_dithered.logo $(XFCE_DIR)/XFCE.logo;       @@\

install::		install_full                       @@\




